<!--
 * @Author: PUPPET17 HERO768BNFV@gmail.com
 * @Date: 2024-02-14 20:34:40
 * @LastEditors: PUPPET17 HERO768BNFV@gmail.com
 * @LastEditTime: 2024-02-15 00:09:07
 * @FilePath: \ThreeJSLearing\freelyRotate.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Three.js 3D Scene with Orbit Controls</title>
    <style>
        /* 定义容器的大小 */
        #container {
            width: 800px;
            height: 600px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 30px; /* 添加圆角 */
            overflow: hidden; /* 防止边缘部分溢出 */
        }
    </style>
</head>
<body>
    <!-- 用于容纳Three.js场景的div容器 -->
    <div id="container"></div>

    <!-- 引入Three.js库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- 引入OrbitControls插件 -->
    <script src="https://threejsfundamentals.org/threejs/resources/threejs/r119/examples/js/controls/OrbitControls.js"></script>
    <script>
        // 创建一个Three.js场景
        var scene = new THREE.Scene();
        // 创建一个透视摄像机，设置视野角度、长宽比、近裁剪面和远裁剪面
        var camera = new THREE.PerspectiveCamera(30, 800 / 600, 0.1, 1000);

        // 创建一个WebGL渲染器
        var renderer = new THREE.WebGLRenderer({ antialias: true });
        // 设置渲染器的大小
        renderer.setSize(800, 600);
        // 将渲染器的canvas元素添加到指定的容器中
        document.getElementById('container').appendChild(renderer.domElement);

        var geometry = new THREE.BoxGeometry(0.9,0.9,0.9);
        var material = new THREE.MeshBasicMaterial({color: 0x666699});
        var cube = new THREE.Mesh(geometry, material);
        scene.add( cube );

        var edges = new THREE.EdgesGeometry(geometry);
        var lineMaterial = new THREE.LineBasicMaterial({color: 0xffffff});
        var wireframe = new THREE.LineSegments(edges, lineMaterial);
        cube.add( wireframe );

        var geometry2 = new THREE.BoxGeometry(1.3,1.3,1.3);
        var wireframe2 = new THREE.WireframeGeometry( geometry2 );
        var line = new THREE.LineSegments( wireframe2,lineMaterial );
        line.material.depthTest = true;
        line.material.transparent = true;
        cube.add( line );

        // 设置摄像机的位置
        camera.position.z = 5;

        // 创建一个OrbitControls控制器，使用户可以控制摄像机并旋转场景
        var controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // 启用阻尼效果
        controls.dampingFactor = 0.25; // 设置阻尼系数
        controls.screenSpacePanning = false; // 禁用屏幕空间平移

        // 定义一个函数用于渲染场景并更新控制器
        function animate() {
            requestAnimationFrame(animate);
            controls.update(); // 更新控制器状态
            renderer.render(scene, camera); // 渲染场景
        }

        animate(); // 开始动画循环

        // 在窗口大小变化时重新调整渲染器和摄像机的大小和比例
        window.addEventListener('resize', function(){
            var container = document.getElementById('container');
            var width = container.clientWidth;
            var height = container.clientHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
        });

    </script>
</body>
</html>